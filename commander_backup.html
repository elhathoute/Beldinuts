<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commander - BeldiNuts | Noix et Fruits Secs du Maroc</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="beldi-nuts-logo.png">
    <link rel="apple-touch-icon" href="beldi-nuts-logo.png">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Commandez vos noix et fruits secs préférés directement du Maroc. Amandes, noix, dattes, cajous et raisins secs de qualité premium. Livraison rapide et prix compétitifs.">
    <meta name="keywords" content="noix maroc, fruits secs, amandes, dattes, cajous, raisins secs, alimentation saine, produits naturels, livraison maroc">
    <meta name="author" content="BeldiNuts">
    <meta name="robots" content="index, follow">
    <meta name="language" content="fr">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Commander - BeldiNuts | Noix et Fruits Secs du Maroc">
    <meta property="og:description" content="Commandez vos noix et fruits secs préférés directement du Maroc. Amandes, noix, dattes, cajous et raisins secs de qualité premium.">
    <meta property="og:image" content="beldi-nuts-logo.png">
    <meta property="og:url" content="https://beldinuts.ma/commander.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="BeldiNuts">
    <meta property="og:locale" content="fr_FR">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Commander - BeldiNuts | Noix et Fruits Secs du Maroc">
    <meta name="twitter:description" content="Commandez vos noix et fruits secs préférés directement du Maroc. Amandes, noix, dattes, cajous et raisins secs de qualité premium.">
    <meta name="twitter:image" content="beldi-nuts-logo.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'warm-brown': '#8B4513',
                        'beige': '#F5F5DC',
                        'earth-green': '#8FBC8F',
                        'light-gold': '#DAA520',
                        'cream': '#FFF8DC'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        html {
            scroll-behavior: smooth;
        }
        
        .fade-in {
            animation: fadeIn 1s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Packs Scrollable Styles */
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .pack-card {
            min-width: 280px;
            flex-shrink: 0;
        }
        
        @media (max-width: 768px) {
            .pack-card {
                min-width: 250px;
            }
        }
    </style>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "BeldiNuts",
        "description": "Votre partenaire pour une alimentation saine et naturelle. Des produits d'exception directement du Maroc.",
        "url": "https://beldinuts.ma",
        "logo": "https://beldinuts.ma/beldi-nuts-logo.png",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+212-615-919-437",
            "contactType": "customer service",
            "availableLanguage": ["French", "Arabic", "English"]
        },
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Casablanca",
            "addressCountry": "MA"
        },
        "sameAs": [
            "https://www.facebook.com/beldinuts",
            "https://www.instagram.com/beldinuts",
            "https://www.twitter.com/beldinuts"
        ]
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Commander - BeldiNuts",
        "description": "Commandez vos noix et fruits secs préférés directement du Maroc. Amandes, noix, dattes, cajous et raisins secs de qualité premium.",
        "url": "https://beldinuts.ma/commander.html",
        "isPartOf": {
            "@type": "WebSite",
            "name": "BeldiNuts",
            "url": "https://beldinuts.ma"
        },
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Accueil",
                    "item": "https://beldinuts.ma"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Commander",
                    "item": "https://beldinuts.ma/commander.html"
                }
            ]
        }
    }
    </script>
</head>
<body class="font-sans bg-gray-50">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white/90 backdrop-blur-sm z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <div class="flex items-center">
                        <img src="beldi-nuts-logo.png" alt="BeldiNuts Logo" class="h-8 w-8 mr-3">
                        <h1 class="text-2xl font-bold text-warm-brown">BeldiNuts</h1>
                    </div>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="index.html" class="text-warm-brown hover:text-light-gold transition-colors" data-translate="nav_home">Accueil</a>
                    <a href="index.html#apropos" class="text-warm-brown hover:text-light-gold transition-colors" data-translate="nav_about">À propos</a>
                    <a href="index.html#produits" class="text-warm-brown hover:text-light-gold transition-colors" data-translate="nav_products">Produits</a>
                    <a href="commander.html" class="text-warm-brown hover:text-light-gold transition-colors bg-light-gold text-white px-4 py-2 rounded-full" data-translate="nav_order">Commander</a>
                    <a href="index.html#contact" class="text-warm-brown hover:text-light-gold transition-colors" data-translate="nav_contact">Contact</a>
                    
                    <!-- Cart Icon -->
                    <button onclick="toggleCartModal()" class="relative text-warm-brown hover:text-light-gold transition-colors">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-light-gold text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                    </button>
                    
                    <!-- Language Selector -->
                    <div class="relative">
                        <select id="language-select" onchange="changeLanguage(this.value)" 
                                class="bg-transparent border border-warm-brown text-warm-brown px-3 py-1 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-light-gold">
                            <option value="fr">🇫🇷 FR</option>
                            <option value="ar">🇲🇦 AR</option>
                            <option value="en">🇺🇸 EN</option>
                        </select>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-toggle" class="text-warm-brown focus:outline-none" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation Menu -->
            <div id="mobile-menu" class="md:hidden hidden bg-white border-t border-gray-200">
                <div class="px-4 py-4 space-y-4">
                    <a href="index.html" class="block text-warm-brown hover:text-light-gold transition-colors py-2" data-translate="nav_home">Accueil</a>
                    <a href="index.html#apropos" class="block text-warm-brown hover:text-light-gold transition-colors py-2" data-translate="nav_about">À propos</a>
                    <a href="index.html#produits" class="block text-warm-brown hover:text-light-gold transition-colors py-2" data-translate="nav_products">Produits</a>
                    <a href="commander.html" class="block text-warm-brown hover:text-light-gold transition-colors bg-light-gold text-white px-4 py-2 rounded-full text-center" data-translate="nav_order">Commander</a>
                    <a href="index.html#contact" class="block text-warm-brown hover:text-light-gold transition-colors py-2" data-translate="nav_contact">Contact</a>
                    
                    <!-- Cart Button for Mobile -->
                    <button onclick="toggleCartModal()" class="w-full flex items-center justify-center text-warm-brown hover:text-light-gold transition-colors py-2">
                        <i class="fas fa-shopping-cart text-xl mr-2"></i>
                        <span data-translate="cart">Panier</span>
                        <span id="cart-count-mobile" class="ml-2 bg-light-gold text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                    </button>
                    
                    <!-- Currency Selector for Mobile -->
                    <div class="pt-2">
                        <select id="currency-select-mobile" onchange="changeCurrency(this.value)" 
                                class="w-full bg-transparent border border-warm-brown text-warm-brown px-3 py-2 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-light-gold">
                            <option value="MAD">🇲🇦 DH (Maroc)</option>
                            <option value="EUR">🇪🇺 EUR (Europe)</option>
                            <option value="USD">🇺🇸 USD (Amérique)</option>
                        </select>
                    </div>
                    
                    <!-- Language Selector for Mobile -->
                    <div class="pt-2">
                        <select id="language-select-mobile" onchange="changeLanguage(this.value)" 
                                class="w-full bg-transparent border border-warm-brown text-warm-brown px-3 py-2 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-light-gold">
                            <option value="fr">🇫🇷 FR</option>
                            <option value="ar">🇲🇦 AR</option>
                            <option value="en">🇺🇸 EN</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="bg-gradient-to-r from-warm-brown to-light-gold py-16 pt-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4" data-translate="page_title">
                Commander vos Produits
            </h1>
            <p class="text-xl text-cream mb-6" data-translate="page_subtitle">
                Sélectionnez vos produits préférés et commandez directement via WhatsApp
            </p>
            
        </div>
    </section>

    <!-- Products Selection -->
    <section class="py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Sale Type Selector -->
            <div class="mb-8">
                <div class="max-w-4xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-4 text-center" data-translate="sale_type_title">Type de Vente</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <button id="retail-btn" onclick="setSaleType('retail')" 
                                    class="sale-type-btn bg-light-gold text-white py-4 px-6 rounded-full font-semibold transition-all duration-300 hover:bg-yellow-600 active">
                                <i class="fas fa-shopping-cart mr-2"></i>
                                <span data-translate="retail_sale">Vente Particulière</span>
                                <div class="text-sm opacity-90" data-translate="retail_desc">Prix par gramme</div>
                            </button>
                            <button id="wholesale-btn" onclick="setSaleType('wholesale')" 
                                    class="sale-type-btn bg-gray-200 text-gray-700 py-4 px-6 rounded-full font-semibold transition-all duration-300 hover:bg-gray-300">
                                <i class="fas fa-boxes mr-2"></i>
                                <span data-translate="wholesale_sale">Vente en Gros</span>
                                <div class="text-sm opacity-90" data-translate="wholesale_desc">Prix par pièce</div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Packs Section -->
            <div class="mb-12">
                <div class="max-w-4xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-4 text-center" data-translate="packs_title">Packs Recommandés</h3>
                        <p class="text-gray-600 text-center mb-6" data-translate="packs_subtitle">Économisez avec nos packs de produits sélectionnés</p>
                        
                        <div class="relative">
                            <div class="overflow-x-auto scrollbar-hide">
                                <div class="flex space-x-6 pb-4" id="packs-grid" style="width: max-content;">
                            <!-- Pack 1: Pack Sport -->
                            <div class="bg-gradient-to-br from-blue-600 to-blue-400 rounded-xl p-6 text-white pack-card" data-pack-id="sport">
                                <div class="text-center mb-4">
                                    <i class="fas fa-dumbbell text-3xl mb-2"></i>
                                    <h4 class="text-lg font-bold" data-translate="pack_sport_name">Pack Sport</h4>
                                    <p class="text-sm opacity-90" data-translate="pack_sport_desc">Énergie pour les sportifs</p>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_sport_item1">100g Amandes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_sport_item2">100g Dattes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_sport_item3">100g Raisins</span>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold mb-2">
                                        <span class="pack-price">300 DH</span>
                                        <span class="text-sm opacity-75 line-through ml-2">360 DH</span>
                                    </div>
                                    <button onclick="addPackToCart('sport')" class="bg-white text-blue-600 px-4 py-2 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                                        <i class="fas fa-plus mr-1"></i>
                                        <span data-translate="add_pack">Ajouter Pack</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Pack 2: Pack Famille -->
                            <div class="bg-gradient-to-br from-green-600 to-green-400 rounded-xl p-6 text-white pack-card" data-pack-id="famille">
                                <div class="text-center mb-4">
                                    <i class="fas fa-users text-3xl mb-2"></i>
                                    <h4 class="text-lg font-bold" data-translate="pack_famille_name">Pack Famille</h4>
                                    <p class="text-sm opacity-90" data-translate="pack_famille_desc">Idéal pour toute la famille</p>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_famille_item1">150g Amandes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_famille_item2">150g Noix</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_famille_item3">100g Dattes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_famille_item4">100g Cajous</span>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold mb-2">
                                        <span class="pack-price">500 DH</span>
                                        <span class="text-sm opacity-75 line-through ml-2">600 DH</span>
                                    </div>
                                    <button onclick="addPackToCart('famille')" class="bg-white text-green-600 px-4 py-2 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                                        <i class="fas fa-plus mr-1"></i>
                                        <span data-translate="add_pack">Ajouter Pack</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Pack 3: Pack Collèges -->
                            <div class="bg-gradient-to-br from-purple-600 to-purple-400 rounded-xl p-6 text-white pack-card" data-pack-id="colleges">
                                <div class="text-center mb-4">
                                    <i class="fas fa-graduation-cap text-3xl mb-2"></i>
                                    <h4 class="text-lg font-bold" data-translate="pack_colleges_name">Pack Collèges</h4>
                                    <p class="text-sm opacity-90" data-translate="pack_colleges_desc">Étudiants et collèges</p>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_colleges_item1">200g Amandes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_colleges_item2">200g Dattes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_colleges_item3">200g Raisins</span>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold mb-2">
                                        <span class="pack-price">400 DH</span>
                                        <span class="text-sm opacity-75 line-through ml-2">480 DH</span>
                                    </div>
                                    <button onclick="addPackToCart('colleges')" class="bg-white text-purple-600 px-4 py-2 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                                        <i class="fas fa-plus mr-1"></i>
                                        <span data-translate="add_pack">Ajouter Pack</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Pack 4: Pack Découverte -->
                            <div class="bg-gradient-to-br from-orange-600 to-orange-400 rounded-xl p-6 text-white pack-card" data-pack-id="decouverte">
                                <div class="text-center mb-4">
                                    <i class="fas fa-gift text-3xl mb-2"></i>
                                    <h4 class="text-lg font-bold" data-translate="pack_decouverte_name">Pack Découverte</h4>
                                    <p class="text-sm opacity-90" data-translate="pack_decouverte_desc">Parfait pour commencer</p>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_decouverte_item1">50g Amandes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_decouverte_item2">50g Noix</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_decouverte_item3">50g Dattes</span>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold mb-2">
                                        <span class="pack-price">150 DH</span>
                                        <span class="text-sm opacity-75 line-through ml-2">180 DH</span>
                                    </div>
                                    <button onclick="addPackToCart('decouverte')" class="bg-white text-orange-600 px-4 py-2 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                                        <i class="fas fa-plus mr-1"></i>
                                        <span data-translate="add_pack">Ajouter Pack</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Pack 5: Pack Premium -->
                            <div class="bg-gradient-to-br from-yellow-600 to-yellow-400 rounded-xl p-6 text-white pack-card" data-pack-id="premium">
                                <div class="text-center mb-4">
                                    <i class="fas fa-crown text-3xl mb-2"></i>
                                    <h4 class="text-lg font-bold" data-translate="pack_premium_name">Pack Premium</h4>
                                    <p class="text-sm opacity-90" data-translate="pack_premium_desc">Notre sélection d'exception</p>
                                </div>
                                <div class="space-y-2 mb-4">
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_premium_item1">300g Amandes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_premium_item2">300g Noix</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_premium_item3">300g Dattes</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_premium_item4">300g Cajous</span>
                                    </div>
                                    <div class="flex items-center text-sm">
                                        <i class="fas fa-check mr-2"></i>
                                        <span data-translate="pack_premium_item5">300g Raisins</span>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-2xl font-bold mb-2">
                                        <span class="pack-price">1,500 DH</span>
                                        <span class="text-sm opacity-75 line-through ml-2">1,800 DH</span>
                                    </div>
                                    <button onclick="addPackToCart('premium')" class="bg-white text-yellow-600 px-4 py-2 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                                        <i class="fas fa-plus mr-1"></i>
                                        <span data-translate="add_pack">Ajouter Pack</span>
                                    </button>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Bar with Currency Selector -->
            <div class="mb-12">
                <div class="max-w-4xl mx-auto">
                    <div class="grid md:grid-cols-2 gap-4">
                        <!-- Search Input -->
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                            <input type="text" id="product-search" 
                                   placeholder="Rechercher un produit (amandes, noix, dattes...)" 
                                   class="w-full pl-10 pr-4 py-4 border border-gray-300 rounded-full text-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent shadow-lg"
                                   onkeyup="filterProducts(this.value)">
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                <button onclick="clearSearch()" id="clear-search" class="text-gray-400 hover:text-warm-brown hidden">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Currency Selector -->
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-coins text-gray-400"></i>
                            </div>
                            <select id="currency-select" onchange="changeCurrency(this.value)" 
                                    class="w-full pl-10 pr-4 py-4 border border-gray-300 rounded-full text-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent shadow-lg bg-white appearance-none cursor-pointer">
                                <option value="MAD">🇲🇦 DH (Maroc)</option>
                                <option value="EUR">🇪🇺 EUR (Europe)</option>
                                <option value="USD">🇺🇸 USD (Amérique)</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400"></i>
                            </div>
                        </div>
                        
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-center">
                        Recherchez un produit et choisissez votre devise
                    </p>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="products-grid">
                <!-- Product 1 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden product-card" data-product-name="amandes du maroc">
                    <div class="h-48 bg-cover bg-center relative group" style="background-image: url('https://images.unsplash.com/photo-1582510003544-4d00b7f74220?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openProductModal('amandes')" class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white bg-opacity-90 hover:bg-opacity-100 text-warm-brown p-3 rounded-full shadow-lg transform hover:scale-110 transition-transform">
                                <i class="fas fa-eye text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-3" data-translate="amandes_name">Amandes du Maroc</h3>
                        <p class="text-gray-600 mb-4" data-translate="amandes_desc">
                            Amandes premium, riches en protéines et vitamines E.
                        </p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-warm-brown price-display">2.00 DH/g</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="decreaseQuantity('amandes')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-minus text-sm"></i>
                                </button>
                                <input type="number" id="amandes-qty" value="0" min="0" step="10" 
                                       onchange="updateQuantity('amandes', this.value)" 
                                       oninput="updateQuantity('amandes', this.value)"
                                       class="text-lg font-semibold w-16 text-center border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                                <button onclick="increaseQuantity('amandes')" class="bg-warm-brown hover:bg-brown-700 text-white w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                            </div>
                            <span id="amandes-total" class="text-lg font-bold text-warm-brown">0 DH</span>
                        </div>
                    </div>
                </div>

                <!-- Product 2 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden product-card" data-product-name="noix de grenoble">
                    <div class="h-48 bg-cover bg-center relative group" style="background-image: url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openProductModal('noix')" class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white bg-opacity-90 hover:bg-opacity-100 text-warm-brown p-3 rounded-full shadow-lg transform hover:scale-110 transition-transform">
                                <i class="fas fa-eye text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-3" data-translate="noix_name">Noix de Grenoble</h3>
                        <p class="text-gray-600 mb-4" data-translate="noix_desc">
                            Noix fraîches et croquantes, riches en oméga-3.
                        </p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-warm-brown price-display">2.00 DH/g</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="decreaseQuantity('noix')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-minus text-sm"></i>
                                </button>
                                <input type="number" id="noix-qty" value="0" min="0" step="10" 
                                       onchange="updateQuantity('noix', this.value)" 
                                       oninput="updateQuantity('noix', this.value)"
                                       class="text-lg font-semibold w-16 text-center border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                                <button onclick="increaseQuantity('noix')" class="bg-warm-brown hover:bg-brown-700 text-white w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                            </div>
                            <span id="noix-total" class="text-lg font-bold text-warm-brown">0 DH</span>
                        </div>
                    </div>
                </div>

                <!-- Product 3 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden product-card" data-product-name="dattes medjool">
                    <div class="h-48 bg-cover bg-center relative group" style="background-image: url('https://images.unsplash.com/photo-1609501676725-7186f357aabc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openProductModal('dattes')" class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white bg-opacity-90 hover:bg-opacity-100 text-warm-brown p-3 rounded-full shadow-lg transform hover:scale-110 transition-transform">
                                <i class="fas fa-eye text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-3" data-translate="dattes_name">Dattes Medjool</h3>
                        <p class="text-gray-600 mb-4" data-translate="dattes_desc">
                            Dattes sucrées et moelleuses, source naturelle d'énergie.
                        </p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-warm-brown price-display">2.00 DH/g</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="decreaseQuantity('dattes')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-minus text-sm"></i>
                                </button>
                                <input type="number" id="dattes-qty" value="0" min="0" step="10" 
                                       onchange="updateQuantity('dattes', this.value)" 
                                       oninput="updateQuantity('dattes', this.value)"
                                       class="text-lg font-semibold w-16 text-center border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                                <button onclick="increaseQuantity('dattes')" class="bg-warm-brown hover:bg-brown-700 text-white w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                            </div>
                            <span id="dattes-total" class="text-lg font-bold text-warm-brown">0 DH</span>
                        </div>
                    </div>
                </div>

                <!-- Product 4 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden product-card" data-product-name="noix de cajou">
                    <div class="h-48 bg-cover bg-center relative group" style="background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRTNVd4yBltrmFEHw8_3POIVnTznXbzjBOQ6BbWewEDXRqVGZfiBMkobsynGN_E0A5x37ytvpAjwfgYdYMTRfsAc3ik02cIO5Y6Hnb8hxg')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openProductModal('cajou')" class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white bg-opacity-90 hover:bg-opacity-100 text-warm-brown p-3 rounded-full shadow-lg transform hover:scale-110 transition-transform">
                                <i class="fas fa-eye text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-3" data-translate="cajou_name">Noix de Cajou</h3>
                        <p class="text-gray-600 mb-4" data-translate="cajou_desc">
                            Cajous grillés à sec, sans huile ajoutée.
                        </p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-warm-brown price-display">2.00 DH/g</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="decreaseQuantity('cajou')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-minus text-sm"></i>
                                </button>
                                <input type="number" id="cajou-qty" value="0" min="0" step="10" 
                                       onchange="updateQuantity('cajou', this.value)" 
                                       oninput="updateQuantity('cajou', this.value)"
                                       class="text-lg font-semibold w-16 text-center border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                                <button onclick="increaseQuantity('cajou')" class="bg-warm-brown hover:bg-brown-700 text-white w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                            </div>
                            <span id="cajou-total" class="text-lg font-bold text-warm-brown">0 DH</span>
                        </div>
                    </div>
                </div>

                <!-- Product 5 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden product-card" data-product-name="raisins secs">
                    <div class="h-48 bg-cover bg-center relative group" style="background-image: url('https://www.calconut.com/wp-content/uploads/2021/08/zoom-fotonoticia-371.jpg')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openProductModal('raisins')" class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white bg-opacity-90 hover:bg-opacity-100 text-warm-brown p-3 rounded-full shadow-lg transform hover:scale-110 transition-transform">
                                <i class="fas fa-eye text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-3" data-translate="raisins_name">Raisins Secs</h3>
                        <p class="text-gray-600 mb-4" data-translate="raisins_desc">
                            Raisins secs sans sulfites, naturellement sucrés.
                        </p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-warm-brown price-display">2.00 DH/g</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="decreaseQuantity('raisins')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-minus text-sm"></i>
                                </button>
                                <input type="number" id="raisins-qty" value="0" min="0" step="10" 
                                       onchange="updateQuantity('raisins', this.value)" 
                                       oninput="updateQuantity('raisins', this.value)"
                                       class="text-lg font-semibold w-16 text-center border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                                <button onclick="increaseQuantity('raisins')" class="bg-warm-brown hover:bg-brown-700 text-white w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                            </div>
                            <span id="raisins-total" class="text-lg font-bold text-warm-brown">0 DH</span>
                        </div>
                    </div>
                </div>

                <!-- Product 6 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden product-card" data-product-name="mélange premium">
                    <div class="h-48 bg-cover bg-center relative group" style="background-image: url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80')">
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center">
                            <button onclick="openProductModal('melange')" class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white bg-opacity-90 hover:bg-opacity-100 text-warm-brown p-3 rounded-full shadow-lg transform hover:scale-110 transition-transform">
                                <i class="fas fa-eye text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-warm-brown mb-3" data-translate="melange_name">Mélange Premium</h3>
                        <p class="text-gray-600 mb-4" data-translate="melange_desc">
                            Mélange exclusif d'amandes, noix, dattes et raisins.
                        </p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-warm-brown price-display">2.00 DH/g</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <button onclick="decreaseQuantity('melange')" class="bg-gray-200 hover:bg-gray-300 text-gray-700 w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-minus text-sm"></i>
                                </button>
                                <input type="number" id="melange-qty" value="0" min="0" step="10" 
                                       onchange="updateQuantity('melange', this.value)" 
                                       oninput="updateQuantity('melange', this.value)"
                                       class="text-lg font-semibold w-16 text-center border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                                <button onclick="increaseQuantity('melange')" class="bg-warm-brown hover:bg-brown-700 text-white w-8 h-8 rounded-full flex items-center justify-center">
                                    <i class="fas fa-plus text-sm"></i>
                                </button>
                            </div>
                            <span id="melange-total" class="text-lg font-bold text-warm-brown">0 DH</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Customer Information -->
    <section class="py-16 bg-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-white rounded-2xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-warm-brown mb-6 text-center" data-translate="customer_info_title">Vos Informations</h2>
                
                <form id="customer-form" class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label for="customer-name" class="block text-sm font-medium text-gray-700 mb-2" data-translate="name_label">Nom complet *</label>
                        <input type="text" id="customer-name" name="name" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                    </div>
                    
                    <div>
                        <label for="customer-email" class="block text-sm font-medium text-gray-700 mb-2" data-translate="email_label">Email *</label>
                        <input type="email" id="customer-email" name="email" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                    </div>
                    
                    <div>
                        <label for="customer-phone" class="block text-sm font-medium text-gray-700 mb-2" data-translate="phone_label">Téléphone *</label>
                        <input type="tel" id="customer-phone" name="phone" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                    </div>
                    
                    <div>
                        <label for="delivery-date" class="block text-sm font-medium text-gray-700 mb-2" data-translate="delivery_date_label">Date de livraison souhaitée *</label>
                        <input type="date" id="delivery-date" name="delivery-date" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent">
                    </div>
                    
                    <div class="md:col-span-2">
                        <label for="delivery-address" class="block text-sm font-medium text-gray-700 mb-2" data-translate="address_label">Adresse de livraison complète *</label>
                        <textarea id="delivery-address" name="address" rows="3" required 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent"
                                  placeholder="Rue, numéro, ville, code postal..."></textarea>
                    </div>
                    
                    <div class="md:col-span-2">
                        <label for="delivery-notes" class="block text-sm font-medium text-gray-700 mb-2" data-translate="notes_label">Notes de livraison (optionnel)</label>
                        <textarea id="delivery-notes" name="notes" rows="2" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-warm-brown focus:border-transparent"
                                  placeholder="Instructions spéciales, horaires préférés..."></textarea>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Order Summary -->
    <section class="py-16 bg-beige">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-white rounded-2xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-warm-brown mb-6 text-center" data-translate="order_summary_title">Résumé de votre commande</h2>
                
                <div id="order-summary" class="space-y-4 mb-8">
                    <!-- Order items will be populated here -->
                </div>
                
                <div class="border-t pt-6">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-xl font-bold text-warm-brown" data-translate="total_label">Total:</span>
                        <span id="grand-total" class="text-2xl font-bold text-warm-brown">0€</span>
                    </div>
                    
                    <!-- Paiement échelonné (uniquement pour vente en gros) -->
                    <div id="installment-section" class="mb-6 p-4 bg-blue-50 rounded-lg" style="display: none;">
                        <h4 class="text-lg font-semibold text-blue-800 mb-3">
                            <i class="fas fa-credit-card mr-2"></i>
                            <span data-translate="installment_title">Paiement Échelonné</span>
                        </h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Nombre d'échéances
                                </label>
                                <select id="installment-count" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="1">Paiement unique</option>
                                    <option value="2">2 échéances</option>
                                    <option value="3">3 échéances</option>
                                    <option value="6">6 échéances</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Montant par échéance
                                </label>
                                <div id="installment-amount" class="text-lg font-bold text-blue-600">
                                    -- DH
                                </div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            Le paiement échelonné est disponible uniquement pour les commandes en gros (minimum 500 DH)
                        </p>
                    </div>

                    <div class="text-center">
                        <button id="whatsapp-order" onclick="sendToWhatsApp()" 
                                class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled>
                            <i class="fab fa-whatsapp mr-2"></i>
                            Commander via WhatsApp
                        </button>
                        <p class="text-sm text-gray-600 mt-2">
                            Vous serez redirigé vers WhatsApp pour finaliser votre commande
                        </p>
                        <p class="text-sm text-warm-brown mt-1 font-semibold" id="min-order-text">
                            Commande minimum : 100 DH (50g minimum)
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h3 class="text-2xl font-bold text-light-gold mb-4">Beldinuts</h3>
            <p class="text-gray-300 mb-4">
                Votre partenaire pour une alimentation saine et naturelle
            </p>
            <div class="flex justify-center space-x-6">
                <a href="index.html" class="text-gray-300 hover:text-light-gold transition-colors">Accueil</a>
                <a href="index.html#produits" class="text-gray-300 hover:text-light-gold transition-colors">Produits</a>
                <a href="index.html#contact" class="text-gray-300 hover:text-light-gold transition-colors">Contact</a>
            </div>
        </div>
    </footer>

    <script>
        // Product data - Prix de base en DH par gramme (2 DH/g)
        // Products data will be loaded from JSON
        let products = {};

        // Product details will be loaded from JSON
        let productDetails = {};
        
        // Load data from JSON files
        async function loadData() {
            try {
                // Load products data
                const productsResponse = await fetch('data/products.json');
                const productsData = await productsResponse.json();
                
                // Transform products data for compatibility
                Object.keys(productsData).forEach(key => {
                    products[key] = {
                        name: productsData[key].name,
                        basePrice: productsData[key].basePrice
                    };
                    productDetails[key] = productsData[key];
                });
                
                // Load packs data
                const packsResponse = await fetch('data/packs.json');
                const packsData = await packsResponse.json();
                
                // Update packs object
                Object.assign(packs, packsData);
                
                // Load translations
                const translationsResponse = await fetch('data/translations.json');
                const translationsData = await translationsResponse.json();
                
                // Update translations object
                Object.assign(translations, translationsData);
                
                console.log('Data loaded successfully');
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Cart state
                description: 'Amandes premium sélectionnées dans les meilleures régions du Maroc. Riches en protéines, vitamines E et magnésium, elles sont parfaites pour une alimentation saine et équilibrée.',
                image: 'https://images.unsplash.com/photo-1582510003544-4d00b7f74220?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80',
                benefits: [
                    'Riches en protéines végétales (21g/100g)',
                    'Excellente source de vitamine E (antioxydant)',
                    'Contiennent du magnésium pour la santé cardiaque',
                    'Riches en fibres pour une bonne digestion',
                    'Aident à réduire le cholestérol',
                    'Parfaites pour les sportifs et végétariens'
                ],
                usage: [
                    'Collation saine entre les repas',
                    'Ajout dans les salades et yaourts',
                    'Ingrédient pour pâtisseries et desserts',
                    'Mélange avec d\'autres fruits secs',
                    'Consommation avant ou après le sport'
                ],
                storage: 'Conserver dans un endroit frais et sec, à l\'abri de la lumière. Peuvent être conservées jusqu\'à 12 mois dans un récipient hermétique.'
            },
            noix: {
                name: 'Noix de Grenoble',
                description: 'Noix fraîches et croquantes de Grenoble, réputées pour leur qualité exceptionnelle. Riches en oméga-3, elles contribuent à la santé cardiovasculaire et cérébrale.',
                image: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80',
                benefits: [
                    'Riches en oméga-3 (acides gras essentiels)',
                    'Améliorent la santé cardiovasculaire',
                    'Bénéfiques pour le cerveau et la mémoire',
                    'Contiennent des antioxydants puissants',
                    'Riches en protéines et fibres',
                    'Aident à réduire l\'inflammation'
                ],
                usage: [
                    'Ajout dans les salades vertes',
                    'Ingrédient pour pâtisseries et gâteaux',
                    'Consommation avec du fromage',
                    'Mélange dans les céréales du matin',
                    'Snack sain pour l\'apéritif'
                ],
                storage: 'Conserver au réfrigérateur dans un récipient hermétique pour préserver leur fraîcheur. Peuvent être congelées pour une conservation plus longue.'
            },
            dattes: {
                name: 'Dattes Medjool',
                description: 'Dattes Medjool, les "rois des dattes", sont réputées pour leur goût sucré naturel et leur texture moelleuse. Source naturelle d\'énergie, elles sont parfaites pour les sportifs.',
                image: 'https://images.unsplash.com/photo-1609501676725-7186f357aabc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80',
                benefits: [
                    'Source naturelle d\'énergie rapide',
                    'Riches en potassium et magnésium',
                    'Contiennent des fibres pour la digestion',
                    'Riches en antioxydants',
                    'Aident à réguler la glycémie',
                    'Parfaites pour les sportifs'
                ],
                usage: [
                    'Collation énergétique naturelle',
                    'Remplacement du sucre dans les desserts',
                    'Ingrédient dans les smoothies',
                    'Consommation avant l\'effort physique',
                    'Mélange avec des noix pour un snack équilibré'
                ],
                storage: 'Conserver dans un endroit frais et sec. Peuvent être conservées plusieurs mois. Pour une fraîcheur optimale, conserver au réfrigérateur.'
            },
            cajou: {
                name: 'Noix de Cajou',
                description: 'Noix de cajou grillées à sec, sans huile ajoutée. Croquantes et délicieuses, elles sont riches en protéines et minéraux essentiels pour une alimentation équilibrée.',
                image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRTNVd4yBltrmFEHw8_3POIVnTznXbzjBOQ6BbWewEDXRqVGZfiBMkobsynGN_E0A5x37ytvpAjwfgYdYMTRfsAc3ik02cIO5Y6Hnb8hxg',
                benefits: [
                    'Riches en protéines végétales (18g/100g)',
                    'Excellente source de magnésium',
                    'Contiennent du zinc pour l\'immunité',
                    'Riches en cuivre et phosphore',
                    'Aident à maintenir la santé osseuse',
                    'Contiennent des graisses monoinsaturées'
                ],
                usage: [
                    'Snack parfait pour l\'apéritif',
                    'Ajout dans les plats asiatiques',
                    'Ingrédient dans les salades',
                    'Mélange avec d\'autres fruits secs',
                    'Consommation comme collation saine'
                ],
                storage: 'Conserver dans un récipient hermétique à l\'abri de la lumière et de l\'humidité. Peuvent être conservées jusqu\'à 6 mois dans de bonnes conditions.'
            },
            raisins: {
                name: 'Raisins Secs',
                description: 'Raisins secs sans sulfites, naturellement sucrés. Excellente source d\'énergie et de fibres, ils sont parfaits pour les sportifs et les enfants.',
                image: 'https://www.calconut.com/wp-content/uploads/2021/08/zoom-fotonoticia-371.jpg',
                benefits: [
                    'Source naturelle d\'énergie',
                    'Riches en fibres pour la digestion',
                    'Contiennent des antioxydants',
                    'Riches en potassium et fer',
                    'Aident à maintenir l\'énergie',
                    'Sans sulfites ajoutés'
                ],
                usage: [
                    'Collation énergétique',
                    'Ajout dans les céréales',
                    'Ingrédient dans les pâtisseries',
                    'Mélange dans les salades',
                    'Consommation pendant le sport'
                ],
                storage: 'Conserver dans un endroit frais et sec, à l\'abri de la lumière. Peuvent être conservés plusieurs mois dans un récipient hermétique.'
            },
            melange: {
                name: 'Mélange Premium',
                description: 'Mélange exclusif d\'amandes, noix, dattes et raisins secs. L\'équilibre parfait entre saveurs et nutriments pour une alimentation saine et variée.',
                image: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80',
                benefits: [
                    'Combinaison équilibrée de nutriments',
                    'Riches en protéines et fibres',
                    'Source d\'énergie naturelle',
                    'Contiennent des vitamines et minéraux',
                    'Antioxydants variés',
                    'Parfait pour une alimentation équilibrée'
                ],
                usage: [
                    'Collation complète et équilibrée',
                    'En-cas pour le sport',
                    'Mélange pour petit-déjeuner',
                    'Snack pour les enfants',
                    'Ingrédient dans les desserts'
                ],
                storage: 'Conserver dans un endroit frais et sec. Mélange optimal de conservation pour tous les ingrédients. Conserver dans un récipient hermétique.'
            }
        };

        // Taux de change (approximatifs - taux réels 2024)
        const exchangeRates = {
            MAD: 1,      // Dirham marocain (devise de base)
            EUR: 0.092,  // 1 DH = 0.092 EUR (environ 10.87 DH = 1 EUR)
            USD: 0.099   // 1 DH = 0.099 USD (environ 10.10 DH = 1 USD)
        };

        // Devise actuelle
        let currentCurrency = 'MAD';
        
        // Langue actuelle
        let currentLanguage = 'fr';
        
        // Type de vente actuel
        let saleType = 'retail'; // 'retail' ou 'wholesale'
        
        // Dictionnaire de traductions
        const translations = {
            fr: {
                nav_home: "Accueil",
                nav_about: "À propos",
                nav_products: "Produits",
                nav_order: "Commander",
                nav_contact: "Contact",
                page_title: "Commander vos Produits",
                page_subtitle: "Sélectionnez vos produits préférés et commandez directement via WhatsApp",
                search_placeholder: "Rechercher un produit (amandes, noix, dattes...)",
                search_help: "Recherchez un produit et choisissez votre devise",
                customer_info_title: "Vos Informations",
                name_label: "Nom complet",
                email_label: "Email",
                phone_label: "Téléphone",
                delivery_date_label: "Date de livraison souhaitée",
                address_label: "Adresse de livraison complète",
                address_placeholder: "Rue, numéro, ville, code postal...",
                notes_label: "Notes de livraison (optionnel)",
                notes_placeholder: "Instructions spéciales, horaires préférés...",
                order_summary_title: "Résumé de votre commande",
                total_label: "Total:",
                whatsapp_button: "Commander via WhatsApp",
                whatsapp_help: "Vous serez redirigé vers WhatsApp pour finaliser votre commande",
                min_order: "Commande minimum : 100 DH (50g minimum)",
                no_products: "Aucun produit sélectionné",
                no_results_title: "Aucun produit trouvé",
                no_results_text: "Essayez avec d'autres mots-clés comme \"amandes\", \"noix\", \"dattes\"...",
                amandes_name: "Amandes du Maroc",
                amandes_desc: "Amandes premium, riches en protéines et vitamines E.",
                noix_name: "Noix de Grenoble",
                noix_desc: "Noix fraîches et croquantes, riches en oméga-3.",
                dattes_name: "Dattes Medjool",
                dattes_desc: "Dattes sucrées et moelleuses, source naturelle d'énergie.",
                cajou_name: "Noix de Cajou",
                cajou_desc: "Cajous grillés à sec, sans huile ajoutée.",
                raisins_name: "Raisins Secs",
                raisins_desc: "Raisins secs sans sulfites, naturellement sucrés.",
                melange_name: "Mélange Premium",
                melange_desc: "Mélange exclusif d'amandes, noix, dattes et raisins.",
                sale_type_title: "Type de Vente",
                retail_sale: "Vente Particulière",
                retail_desc: "Prix par gramme",
                wholesale_sale: "Vente en Gros",
                wholesale_desc: "Prix par pièce",
                installment_title: "Paiement Échelonné",
                packs_title: "Packs Recommandés",
                packs_subtitle: "Économisez avec nos packs de produits sélectionnés",
                pack_decouverte_name: "Pack Découverte",
                pack_decouverte_desc: "Parfait pour commencer",
                pack_decouverte_item1: "50g Amandes",
                pack_decouverte_item2: "50g Noix",
                pack_decouverte_item3: "50g Dattes",
                pack_famille_name: "Pack Famille",
                pack_famille_desc: "Idéal pour toute la famille",
                pack_famille_item1: "100g Amandes",
                pack_famille_item2: "100g Noix",
                pack_famille_item3: "100g Dattes",
                pack_famille_item4: "100g Cajous",
                pack_premium_name: "Pack Premium",
                pack_premium_desc: "Notre sélection d'exception",
                pack_premium_item1: "200g Amandes",
                pack_premium_item2: "200g Noix",
                pack_premium_item3: "200g Dattes",
                pack_premium_item4: "200g Cajous",
                pack_premium_item5: "200g Raisins",
                add_pack: "Ajouter Pack",
                cart_title: "Mon Panier",
                cart_total: "Total:",
                continue_shopping: "Continuer les achats",
                order_whatsapp: "Commander via WhatsApp",
                remove_item: "Supprimer",
                empty_cart: "Votre panier est vide",
                add_items: "Ajoutez des produits pour commencer"
            },
            ar: {
                nav_home: "الرئيسية",
                nav_about: "من نحن",
                nav_products: "المنتجات",
                nav_order: "اطلب",
                nav_contact: "اتصل بنا",
                page_title: "اطلب منتجاتك",
                page_subtitle: "اختر منتجاتك المفضلة واطلب مباشرة عبر واتساب",
                search_placeholder: "البحث عن منتج (لوز، جوز، تمر...)",
                search_help: "ابحث عن منتج واختر عملتك",
                customer_info_title: "معلوماتك",
                name_label: "الاسم الكامل",
                email_label: "البريد الإلكتروني",
                phone_label: "الهاتف",
                delivery_date_label: "تاريخ التسليم المطلوب",
                address_label: "عنوان التسليم الكامل",
                address_placeholder: "الشارع، الرقم، المدينة، الرمز البريدي...",
                notes_label: "ملاحظات التسليم (اختياري)",
                notes_placeholder: "تعليمات خاصة، أوقات مفضلة...",
                order_summary_title: "ملخص طلبك",
                total_label: "المجموع:",
                whatsapp_button: "اطلب عبر واتساب",
                whatsapp_help: "سيتم توجيهك إلى واتساب لإتمام طلبك",
                min_order: "الحد الأدنى للطلب: 100 درهم (50 جرام على الأقل)",
                no_products: "لم يتم اختيار أي منتج",
                no_results_title: "لم يتم العثور على منتجات",
                no_results_text: "جرب كلمات مفتاحية أخرى مثل \"لوز\"، \"جوز\"، \"تمر\"...",
                amandes_name: "لوز المغرب",
                amandes_desc: "لوز ممتاز، غني بالبروتينات وفيتامين E.",
                noix_name: "جوز غرينوبل",
                noix_desc: "جوز طازج ومقرمش، غني بأوميغا 3.",
                dattes_name: "تمر مجهول",
                dattes_desc: "تمر حلو وطري، مصدر طبيعي للطاقة.",
                cajou_name: "كاجو",
                cajou_desc: "كاجو محمص جاف، بدون زيت مضاف.",
                raisins_name: "زبيب",
                raisins_desc: "زبيب بدون كبريتات، حلو طبيعياً.",
                melange_name: "خليط ممتاز",
                melange_desc: "خليط حصري من اللوز والجوز والتمر والزبيب.",
                sale_type_title: "نوع البيع",
                retail_sale: "بيع بالتجزئة",
                retail_desc: "سعر بالغرام",
                wholesale_sale: "بيع بالجملة",
                wholesale_desc: "سعر بالقطعة",
                installment_title: "الدفع على أقساط",
                packs_title: "باقات موصى بها",
                packs_subtitle: "وفر مع باقات المنتجات المختارة",
                pack_decouverte_name: "باقة الاستكشاف",
                pack_decouverte_desc: "مثالية للبداية",
                pack_decouverte_item1: "50 جرام لوز",
                pack_decouverte_item2: "50 جرام جوز",
                pack_decouverte_item3: "50 جرام تمر",
                pack_famille_name: "باقة العائلة",
                pack_famille_desc: "مثالية للعائلة",
                pack_famille_item1: "100 جرام لوز",
                pack_famille_item2: "100 جرام جوز",
                pack_famille_item3: "100 جرام تمر",
                pack_famille_item4: "100 جرام كاجو",
                pack_premium_name: "الباقة المميزة",
                pack_premium_desc: "اختيارنا الاستثنائي",
                pack_premium_item1: "200 جرام لوز",
                pack_premium_item2: "200 جرام جوز",
                pack_premium_item3: "200 جرام تمر",
                pack_premium_item4: "200 جرام كاجو",
                pack_premium_item5: "200 جرام زبيب",
                add_pack: "إضافة الباقة",
                cart_title: "سلة التسوق",
                cart_total: "المجموع:",
                continue_shopping: "متابعة التسوق",
                order_whatsapp: "اطلب عبر واتساب",
                remove_item: "حذف",
                empty_cart: "سلة التسوق فارغة",
                add_items: "أضف منتجات للبدء"
            },
            en: {
                nav_home: "Home",
                nav_about: "About",
                nav_products: "Products",
                nav_order: "Order",
                nav_contact: "Contact",
                page_title: "Order Your Products",
                page_subtitle: "Select your favorite products and order directly via WhatsApp",
                search_placeholder: "Search for a product (almonds, nuts, dates...)",
                search_help: "Search for a product and choose your currency",
                customer_info_title: "Your Information",
                name_label: "Full Name",
                email_label: "Email",
                phone_label: "Phone",
                delivery_date_label: "Preferred delivery date",
                address_label: "Complete delivery address",
                address_placeholder: "Street, number, city, postal code...",
                notes_label: "Delivery notes (optional)",
                notes_placeholder: "Special instructions, preferred times...",
                order_summary_title: "Order Summary",
                total_label: "Total:",
                whatsapp_button: "Order via WhatsApp",
                whatsapp_help: "You will be redirected to WhatsApp to finalize your order",
                min_order: "Minimum order: 100 DH (50g minimum)",
                no_products: "No products selected",
                no_results_title: "No products found",
                no_results_text: "Try other keywords like \"almonds\", \"nuts\", \"dates\"...",
                amandes_name: "Moroccan Almonds",
                amandes_desc: "Premium almonds, rich in proteins and vitamin E.",
                noix_name: "Grenoble Walnuts",
                noix_desc: "Fresh and crunchy walnuts, rich in omega-3.",
                dattes_name: "Medjool Dates",
                dattes_desc: "Sweet and soft dates, natural source of energy.",
                cajou_name: "Cashew Nuts",
                cajou_desc: "Dry roasted cashews, without added oil.",
                raisins_name: "Dried Grapes",
                raisins_desc: "Sulfite-free raisins, naturally sweet.",
                melange_name: "Premium Mix",
                melange_desc: "Exclusive blend of almonds, walnuts, dates and raisins.",
                sale_type_title: "Sale Type",
                retail_sale: "Retail Sale",
                retail_desc: "Price per gram",
                wholesale_sale: "Wholesale Sale",
                wholesale_desc: "Price per piece",
                installment_title: "Installment Payment",
                packs_title: "Recommended Packs",
                packs_subtitle: "Save with our selected product packs",
                pack_decouverte_name: "Discovery Pack",
                pack_decouverte_desc: "Perfect to start",
                pack_decouverte_item1: "50g Almonds",
                pack_decouverte_item2: "50g Walnuts",
                pack_decouverte_item3: "50g Dates",
                pack_famille_name: "Family Pack",
                pack_famille_desc: "Ideal for the whole family",
                pack_famille_item1: "100g Almonds",
                pack_famille_item2: "100g Walnuts",
                pack_famille_item3: "100g Dates",
                pack_famille_item4: "100g Cashews",
                pack_premium_name: "Premium Pack",
                pack_premium_desc: "Our exceptional selection",
                pack_premium_item1: "200g Almonds",
                pack_premium_item2: "200g Walnuts",
                pack_premium_item3: "200g Dates",
                pack_premium_item4: "200g Cashews",
                pack_premium_item5: "200g Raisins",
                add_pack: "Add Pack",
                cart_title: "My Cart",
                cart_total: "Total:",
                continue_shopping: "Continue Shopping",
                order_whatsapp: "Order via WhatsApp",
                remove_item: "Remove",
                empty_cart: "Your cart is empty",
                add_items: "Add products to get started"
            }
        };

        // Données de vente en gros
        const wholesaleProducts = {
            amandes: {
                name: "Amandes du Maroc",
                pricePerPiece: 600, // DH par pièce
                weightPerPiece: 5, // kg par pièce
                packaging: "Sac de 5 kg"
            },
            noix: {
                name: "Noix de Grenoble", 
                pricePerPiece: 500,
                weightPerPiece: 5,
                packaging: "Sac de 5 kg"
            },
            dattes: {
                name: "Dattes Medjool",
                pricePerPiece: 400,
                weightPerPiece: 5,
                packaging: "Sac de 5 kg"
            },
            cajou: {
                name: "Noix de Cajou",
                pricePerPiece: 600,
                weightPerPiece: 5,
                packaging: "Sac de 5 kg"
            },
            raisins: {
                name: "Raisins Secs",
                pricePerPiece: 300,
                weightPerPiece: 5,
                packaging: "Sac de 5 kg"
            },
            melange: {
                name: "Mélange Premium",
                pricePerPiece: 550,
                weightPerPiece: 5,
                packaging: "Sac de 5 kg"
            }
        };

        // Cart state
        let cart = {};
        
        // Pack data
        const packs = {
            decouverte: {
                name: 'Pack Découverte',
                price: 180, // Prix en DH
                originalPrice: 200,
                products: {
                    amandes: 50,
                    noix: 50,
                    dattes: 50
                }
            },
            famille: {
                name: 'Pack Famille',
                price: 680,
                originalPrice: 800,
                products: {
                    amandes: 100,
                    noix: 100,
                    dattes: 100,
                    cajou: 100
                }
            },
            premium: {
                name: 'Pack Premium',
                price: 1800,
                originalPrice: 2000,
                products: {
                    amandes: 200,
                    noix: 200,
                    dattes: 200,
                    cajou: 200,
                    raisins: 200
                }
            }
        };

        // Initialize cart
        Object.keys(products).forEach(productId => {
            cart[productId] = 0;
        });
        
        // Initialiser l'affichage des prix
        updateAllPrices();
        updateMinOrderText();
        updatePackPrices();

        // Fonction pour changer la devise
        function changeCurrency(currency) {
            console.log('Changement de devise vers:', currency);
            currentCurrency = currency;
            
            // Mettre à jour les sélecteurs de devise
            const desktopSelect = document.getElementById('currency-select');
            const mobileSelect = document.getElementById('currency-select-mobile');
            if (desktopSelect) desktopSelect.value = currency;
            if (mobileSelect) mobileSelect.value = currency;
            
            // Mettre à jour tous les prix affichés
            updateAllPrices();
            
            // Mettre à jour tous les totaux des produits sélectionnés
            Object.keys(cart).forEach(productId => {
                updateProductDisplay(productId);
            });
            
            // Mettre à jour le résumé de commande
            updateOrderSummary();
            
            // Mettre à jour le texte de commande minimum
            updateMinOrderText();
            
            // Mettre à jour la section paiement échelonné
            updateInstallmentSection();
            
            // Mettre à jour les prix des packs
            updatePackPrices();
        }
        
        // Fonction pour changer la langue
        function changeLanguage(language) {
            currentLanguage = language;
            document.documentElement.lang = language;
            
            // Mettre à jour tous les éléments avec data-translate
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[language] && translations[language][key]) {
                    element.textContent = translations[language][key];
                }
            });
            
            // Mettre à jour les placeholders
            const searchInput = document.getElementById('product-search');
            if (searchInput && translations[language].search_placeholder) {
                searchInput.placeholder = translations[language].search_placeholder;
            }
            
            // Mettre à jour les meta descriptions selon la langue
            updateMetaDescriptions(language);
        }
        
        // Fonction pour mettre à jour les meta descriptions
        function updateMetaDescriptions(language) {
            const metaDescriptions = {
                fr: {
                    title: "Commander - BeldiNuts | Noix et Fruits Secs du Maroc",
                    description: "Commandez vos noix et fruits secs préférés directement du Maroc. Amandes, noix, dattes, cajous et raisins secs de qualité premium. Livraison rapide et prix compétitifs."
                },
                ar: {
                    title: "اطلب - بيلدي نتس | مكسرات وفواكه مجففة من المغرب",
                    description: "اطلبوا مكسراتكم وفواكهكم المجففة المفضلة مباشرة من المغرب. لوز، جوز، تمر، كاجو وزبيب بجودة ممتازة. توصيل سريع وأسعار تنافسية."
                },
                en: {
                    title: "Order - BeldiNuts | Nuts and Dried Fruits from Morocco",
                    description: "Order your favorite nuts and dried fruits directly from Morocco. Almonds, walnuts, dates, cashews and raisins of premium quality. Fast delivery and competitive prices."
                }
            };
            
            if (metaDescriptions[language]) {
                document.title = metaDescriptions[language].title;
                
                // Mettre à jour la meta description
                let metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute('content', metaDescriptions[language].description);
                }
                
                // Mettre à jour Open Graph
                let ogTitle = document.querySelector('meta[property="og:title"]');
                let ogDesc = document.querySelector('meta[property="og:description"]');
                if (ogTitle) ogTitle.setAttribute('content', metaDescriptions[language].title);
                if (ogDesc) ogDesc.setAttribute('content', metaDescriptions[language].description);
                
                // Mettre à jour Twitter Card
                let twitterTitle = document.querySelector('meta[name="twitter:title"]');
                let twitterDesc = document.querySelector('meta[name="twitter:description"]');
                if (twitterTitle) twitterTitle.setAttribute('content', metaDescriptions[language].title);
                if (twitterDesc) twitterDesc.setAttribute('content', metaDescriptions[language].description);
            }
        }
        
        // Fonction pour changer le type de vente
        function setSaleType(type) {
            saleType = type;
            
            // Mettre à jour les boutons
            document.querySelectorAll('.sale-type-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-light-gold', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            if (type === 'retail') {
                document.getElementById('retail-btn').classList.add('active', 'bg-light-gold', 'text-white');
                document.getElementById('retail-btn').classList.remove('bg-gray-200', 'text-gray-700');
            } else {
                document.getElementById('wholesale-btn').classList.add('active', 'bg-light-gold', 'text-white');
                document.getElementById('wholesale-btn').classList.remove('bg-gray-200', 'text-gray-700');
            }
            
            // Réinitialiser le panier
            Object.keys(cart).forEach(productId => {
                cart[productId] = 0;
            });
            
            // Mettre à jour l'affichage des produits
            updateAllPrices(); // Mettre à jour les prix affichés
            updateAllProductsDisplay();
            updateOrderSummary();
            updateInstallmentSection();
            updateMinOrderText(); // Mettre à jour le texte de commande minimum
        }
        
        // Fonction pour mettre à jour la section paiement échelonné
        function updateInstallmentSection() {
            const installmentSection = document.getElementById('installment-section');
            const installmentCount = document.getElementById('installment-count');
            const installmentAmount = document.getElementById('installment-amount');
            
            if (saleType === 'wholesale') {
                installmentSection.style.display = 'block';
                
                // Calculer le total actuel
                let total = 0;
                Object.keys(cart).forEach(productId => {
                    if (cart[productId] > 0) {
                        if (saleType === 'wholesale') {
                            const basePrice = 6; // Prix fixe 6 DH/pièce
                            const pricePerPiece = basePrice * exchangeRates[currentCurrency];
                            total += cart[productId] * pricePerPiece;
                        } else {
                            const basePrice = products[productId].basePrice;
                            const pricePerGram = basePrice * exchangeRates[currentCurrency];
                            total += cart[productId] * pricePerGram;
                        }
                    }
                });
                
                // Mettre à jour le montant par échéance
                const count = parseInt(installmentCount.value) || 1;
                const amountPerInstallment = total / count;
                installmentAmount.textContent = `${amountPerInstallment.toFixed(2)} ${getCurrencySymbol()}`;
                
                // Écouter les changements du nombre d'échéances
                installmentCount.onchange = function() {
                    const newCount = parseInt(this.value) || 1;
                    const newAmount = total / newCount;
                    installmentAmount.textContent = `${newAmount.toFixed(2)} ${getCurrencySymbol()}`;
                };
            } else {
                installmentSection.style.display = 'none';
            }
        }

        // Fonction pour mettre à jour le texte de minimum de commande
        function updateMinOrderText() {
            const minOrderElement = document.getElementById('min-order-text');
            if (minOrderElement) {
                let minOrderAmount;
                let minOrderText;
                
                if (saleType === 'wholesale') {
                    minOrderAmount = 500 * exchangeRates[currentCurrency];
                    minOrderText = `Commande minimum : ${minOrderAmount.toFixed(2)} ${getCurrencySymbol()} (vente en gros)`;
                } else {
                    minOrderAmount = 100 * exchangeRates[currentCurrency];
                    minOrderText = `Commande minimum : ${minOrderAmount.toFixed(2)} ${getCurrencySymbol()} (50g minimum)`;
                }
                
                minOrderElement.textContent = minOrderText;
            }
        }

        // Fonction pour obtenir le prix dans la devise actuelle
        function getPrice(productId) {
            if (saleType === 'wholesale') {
                // Prix fixe de 6 DH/pièce pour la vente en gros
                const basePrice = 6; // Prix fixe 6 DH/pièce
                return basePrice * exchangeRates[currentCurrency];
            } else {
                // Prix par gramme pour la vente particulière
                const basePrice = products[productId].basePrice;
                return basePrice * exchangeRates[currentCurrency];
            }
        }

        // Fonction pour obtenir le symbole de la devise
        function getCurrencySymbol() {
            const symbols = {
                MAD: 'DH',
                EUR: '€',
                USD: '$'
            };
            return symbols[currentCurrency];
        }

        // Fonction pour mettre à jour tous les prix affichés
        function updateAllPrices() {
            const priceElements = document.querySelectorAll('.price-display');
            priceElements.forEach(element => {
                const productCard = element.closest('.product-card');
                if (productCard) {
                    const productName = productCard.getAttribute('data-product-name');
                    // Mapper les noms de produits aux IDs
                    let productId = '';
                    switch(productName) {
                        case 'amandes du maroc': productId = 'amandes'; break;
                        case 'noix de grenoble': productId = 'noix'; break;
                        case 'dattes medjool': productId = 'dattes'; break;
                        case 'noix de cajou': productId = 'cajou'; break;
                        case 'raisins secs': productId = 'raisins'; break;
                        case 'mélange premium': productId = 'melange'; break;
                    }
                    
                    if (productId && products[productId]) {
                        if (saleType === 'wholesale') {
                            // Prix fixe de 6 DH/pièce pour la vente en gros
                            const basePrice = 6; // Prix fixe 6 DH/pièce
                            const convertedPrice = basePrice * exchangeRates[currentCurrency];
                            element.textContent = `${convertedPrice.toFixed(2)} ${getCurrencySymbol()}/pièce`;
                        } else {
                            // Prix par gramme pour la vente particulière
                            const basePrice = products[productId].basePrice;
                            const convertedPrice = basePrice * exchangeRates[currentCurrency];
                            element.textContent = `${convertedPrice.toFixed(2)} ${getCurrencySymbol()}/g`;
                        }
                    }
                }
            });
        }

        function increaseQuantity(productId) {
            if (saleType === 'wholesale') {
                cart[productId] += 1; // Incrémenter par 1 pièce
            } else {
                cart[productId] += 10; // Incrémenter par 10g
            }
            updateProductDisplay(productId);
            updateOrderSummary();
        }

        function decreaseQuantity(productId) {
            if (saleType === 'wholesale') {
                if (cart[productId] >= 1) {
                    cart[productId] -= 1; // Décrémenter par 1 pièce
                }
            } else {
                if (cart[productId] >= 10) {
                    cart[productId] -= 10; // Décrémenter par 10g
                }
            }
            updateProductDisplay(productId);
            updateOrderSummary();
        }

        function updateQuantity(productId, value) {
            const quantity = parseInt(value) || 0;
            cart[productId] = Math.max(0, quantity);
            updateProductDisplay(productId);
            updateOrderSummary();
        }

        function updateProductDisplay(productId) {
            const qtyElement = document.getElementById(`${productId}-qty`);
            const totalElement = document.getElementById(`${productId}-total`);
            
            qtyElement.value = cart[productId];
            
            if (saleType === 'wholesale') {
                // Vente en gros : prix fixe de 6 DH/pièce
                const basePrice = 6; // Prix fixe 6 DH/pièce
                const pricePerPiece = basePrice * exchangeRates[currentCurrency];
                const total = cart[productId] * pricePerPiece;
                totalElement.textContent = `${total.toFixed(2)} ${getCurrencySymbol()}`;
            } else {
                // Vente particulière : prix par gramme
                const basePrice = 2; // Prix de base 2 DH/g
                const pricePerGram = basePrice * exchangeRates[currentCurrency];
                const total = cart[productId] * pricePerGram;
                totalElement.textContent = `${total.toFixed(2)} ${getCurrencySymbol()}`;
            }
        }
        
        // Fonction pour mettre à jour l'affichage de tous les produits
        function updateAllProductsDisplay() {
            Object.keys(products).forEach(productId => {
                updateProductDisplay(productId);
            });
        }

        function updateOrderSummary() {
            const orderSummary = document.getElementById('order-summary');
            const grandTotalElement = document.getElementById('grand-total');
            const whatsappButton = document.getElementById('whatsapp-order');
            
            let total = 0;
            let hasItems = false;
            
            orderSummary.innerHTML = '';
            
            Object.keys(cart).forEach(productId => {
                if (cart[productId] > 0) {
                    hasItems = true;
                    const product = products[productId];
                    let subtotal = 0;
                    let quantityText = '';

                    if (saleType === 'wholesale') {
                        // Vente en gros : prix fixe de 6 DH/pièce
                        const basePrice = 6; // Prix fixe 6 DH/pièce
                        const pricePerPiece = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerPiece;
                        quantityText = `x${cart[productId]} pièce${cart[productId] > 1 ? 's' : ''}`;
                    } else {
                        // Vente particulière : prix par gramme
                        const basePrice = 2; // Prix de base 2 DH/g
                        const pricePerGram = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerGram;
                        quantityText = `x${cart[productId]}g`;
                    }
                    
                    total += subtotal;

                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'flex justify-between items-center py-2 border-b border-gray-200';
                    itemDiv.innerHTML = `
                        <div>
                            <span class="font-semibold">${product.name}</span>
                            <span class="text-gray-600 ml-2">${quantityText}</span>
                        </div>
                        <span class="font-bold text-warm-brown">${subtotal.toFixed(2)} ${getCurrencySymbol()}</span>
                    `;
                    orderSummary.appendChild(itemDiv);
                }
            });
            
            if (!hasItems) {
                orderSummary.innerHTML = '<p class="text-gray-500 text-center py-4">Aucun produit sélectionné</p>';
            }
            
            grandTotalElement.textContent = `${total.toFixed(2)} ${getCurrencySymbol()}`;
            
            // Debug: forcer la mise à jour du total général
            console.log('Total calculé:', total, 'Devise:', currentCurrency, 'Symbole:', getCurrencySymbol());
            
            // Vérifier si le formulaire est valide
            const form = document.getElementById('customer-form');
            const isFormValid = form.checkValidity();
            
            // Seuils différents selon le type de vente
            let minOrderAmount;
            if (saleType === 'wholesale') {
                minOrderAmount = 500 * exchangeRates[currentCurrency]; // 500 DH pour vente en gros
            } else {
                minOrderAmount = 100 * exchangeRates[currentCurrency]; // 100 DH pour vente particulière
            }
            
            whatsappButton.disabled = !hasItems || total < minOrderAmount || !isFormValid;
            
            // Mettre à jour la section paiement échelonné
            updateInstallmentSection();
            
            // Mettre à jour le compteur du panier
            updateCartCounter();
        }

        function sendToWhatsApp() {
            // Vérifier que le formulaire est valide
            const form = document.getElementById('customer-form');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            // Récupérer les informations du client
            const customerName = document.getElementById('customer-name').value;
            const customerEmail = document.getElementById('customer-email').value;
            const customerPhone = document.getElementById('customer-phone').value;
            const deliveryDate = document.getElementById('delivery-date').value;
            const deliveryAddress = document.getElementById('delivery-address').value;
            const deliveryNotes = document.getElementById('delivery-notes').value;
            
            let message = "🌰 *Commande BeldiNuts*\n\n";
            message += "Bonjour ! Je souhaite commander les produits suivants :\n\n";
            
            let total = 0;
            let hasItems = false;
            
            Object.keys(cart).forEach(productId => {
                if (cart[productId] > 0) {
                    hasItems = true;
                    const product = products[productId];
                    let subtotal = 0;
                    let quantityText = '';

                    if (saleType === 'wholesale') {
                        // Vente en gros : prix fixe de 6 DH/pièce
                        const basePrice = 6; // Prix fixe 6 DH/pièce
                        const pricePerPiece = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerPiece;
                        quantityText = `${cart[productId]} pièce${cart[productId] > 1 ? 's' : ''}`;
                    } else {
                        // Vente particulière : prix par gramme
                        const basePrice = 2; // Prix de base 2 DH/g
                        const pricePerGram = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerGram;
                        quantityText = `${cart[productId]}g`;
                    }
                    
                    total += subtotal;
                    message += `• ${product.name}: ${quantityText} (${subtotal.toFixed(2)} ${getCurrencySymbol()})\n`;
                }
            });
            
            if (hasItems) {
                message += `\n*Total: ${total.toFixed(2)} ${getCurrencySymbol()}*\n\n`;
                
                // Ajouter les détails du paiement échelonné si vente en gros
                if (saleType === 'wholesale') {
                    const installmentCount = document.getElementById('installment-count').value;
                    const installmentAmount = document.getElementById('installment-amount').textContent;
                    
                    message += "*💳 Paiement Échelonné :*\n";
                    message += `📊 Nombre d'échéances: ${installmentCount}\n`;
                    message += `💰 Montant par échéance: ${installmentAmount}\n\n`;
                }
                
                message += "*Informations de livraison :*\n";
                message += `👤 Nom: ${customerName}\n`;
                message += `📧 Email: ${customerEmail}\n`;
                message += `📱 Téléphone: ${customerPhone}\n`;
                message += `📅 Date souhaitée: ${deliveryDate}\n`;
                message += `📍 Adresse: ${deliveryAddress}\n`;
                if (deliveryNotes.trim()) {
                    message += `📝 Notes: ${deliveryNotes}\n`;
                }
                message += `\nMerci de me confirmer la disponibilité et les modalités de livraison.`;
                
                const phoneNumber = "212615919437";
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            }
        }

        // Fonction pour filtrer les produits
        function filterProducts(searchTerm) {
            const products = document.querySelectorAll('.product-card');
            const searchTermLower = searchTerm.toLowerCase().trim();
            const clearButton = document.getElementById('clear-search');
            
            // Afficher/masquer le bouton de suppression
            if (searchTermLower.length > 0) {
                clearButton.classList.remove('hidden');
            } else {
                clearButton.classList.add('hidden');
            }
            
            let visibleCount = 0;
            
            products.forEach(product => {
                const productName = product.getAttribute('data-product-name').toLowerCase();
                const productTitle = product.querySelector('h3').textContent.toLowerCase();
                
                if (productName.includes(searchTermLower) || productTitle.includes(searchTermLower)) {
                    product.style.display = 'block';
                    product.style.animation = 'fadeIn 0.3s ease-in';
                    visibleCount++;
                } else {
                    product.style.display = 'none';
                }
            });
            
            // Afficher un message si aucun produit trouvé
            showNoResultsMessage(visibleCount === 0 && searchTermLower.length > 0);
        }
        
        // Fonction pour effacer la recherche
        function clearSearch() {
            const searchInput = document.getElementById('product-search');
            searchInput.value = '';
            filterProducts('');
        }
        
        // Fonction pour afficher le message "aucun résultat"
        function showNoResultsMessage(show) {
            let noResultsMsg = document.getElementById('no-results-message');
            
            if (show && !noResultsMsg) {
                noResultsMsg = document.createElement('div');
                noResultsMsg.id = 'no-results-message';
                noResultsMsg.className = 'col-span-full text-center py-12';
                noResultsMsg.innerHTML = `
                    <div class="text-gray-500">
                        <i class="fas fa-search text-4xl mb-4"></i>
                        <h3 class="text-xl font-semibold mb-2">Aucun produit trouvé</h3>
                        <p>Essayez avec d'autres mots-clés comme "amandes", "noix", "dattes"...</p>
                    </div>
                `;
                document.getElementById('products-grid').appendChild(noResultsMsg);
            } else if (!show && noResultsMsg) {
                noResultsMsg.remove();
            }
        }

        // Fonction pour basculer le menu mobile
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const toggleButton = document.getElementById('mobile-menu-toggle');
            const icon = toggleButton.querySelector('i');
            
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                mobileMenu.classList.add('hidden');
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }

        // Fonction pour ouvrir le modal des détails du produit
        function openProductModal(productId) {
            const modal = document.getElementById('product-modal');
            const product = productDetails[productId];
            
            if (!product) return;
            
            // Mettre à jour le contenu du modal
            document.getElementById('modal-title').textContent = 'Détails du Produit';
            document.getElementById('modal-product-name').textContent = product.name;
            document.getElementById('modal-description').textContent = product.description;
            document.getElementById('modal-image').style.backgroundImage = `url('${product.image}')`;
            
            // Mettre à jour le prix
            let basePrice, unit;
            if (saleType === 'wholesale') {
                basePrice = 6; // Prix fixe 6 DH/pièce
                unit = 'pièce';
            } else {
                basePrice = products[productId].basePrice || 2;
                unit = 'g';
            }
            const convertedPrice = basePrice * exchangeRates[currentCurrency];
            document.getElementById('modal-price').textContent = `${convertedPrice.toFixed(2)} ${getCurrencySymbol()}/${unit}`;
            
            // Mettre à jour les bienfaits
            const benefitsList = document.getElementById('modal-benefits');
            benefitsList.innerHTML = '';
            product.benefits.forEach(benefit => {
                const li = document.createElement('li');
                li.className = 'flex items-start';
                li.innerHTML = `<i class="fas fa-check text-green-500 mr-2 mt-1"></i><span>${benefit}</span>`;
                benefitsList.appendChild(li);
            });
            
            // Mettre à jour les conseils d'utilisation
            const usageList = document.getElementById('modal-usage');
            usageList.innerHTML = '';
            product.usage.forEach(usage => {
                const li = document.createElement('li');
                li.className = 'flex items-start';
                li.innerHTML = `<i class="fas fa-star text-yellow-500 mr-2 mt-1"></i><span>${usage}</span>`;
                usageList.appendChild(li);
            });
            
            // Mettre à jour les conseils de conservation
            document.getElementById('modal-storage').textContent = product.storage;
            
            // Afficher le modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Empêcher le scroll de la page
        }

        // Fonction pour fermer le modal
        function closeProductModal() {
            const modal = document.getElementById('product-modal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto'; // Restaurer le scroll de la page
        }

        // Fonction pour ajouter un pack au panier
        function addPackToCart(packId) {
            const pack = packs[packId];
            if (!pack) return;
            
            // Ajouter chaque produit du pack au panier
            Object.keys(pack.products).forEach(productId => {
                cart[productId] += pack.products[productId];
            });
            
            // Mettre à jour l'affichage
            updateAllProductsDisplay();
            updateOrderSummary();
            
            // Afficher une notification
            showPackAddedNotification(pack.name);
        }
        
        // Fonction pour afficher une notification d'ajout de pack
        function showPackAddedNotification(packName) {
            // Créer une notification temporaire
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span>Pack "${packName}" ajouté au panier !</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animer l'apparition
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Supprimer après 3 secondes
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Fonction pour mettre à jour les prix des packs selon la devise
        function updatePackPrices() {
            const packPriceElements = document.querySelectorAll('.pack-price');
            packPriceElements.forEach(element => {
                const packCard = element.closest('.pack-card');
                const packId = packCard.getAttribute('data-pack-id');
                const pack = packs[packId];
                
                if (pack) {
                    const convertedPrice = pack.price * exchangeRates[currentCurrency];
                    const convertedOriginalPrice = pack.originalPrice * exchangeRates[currentCurrency];
                    
                    element.textContent = `${convertedPrice.toFixed(2)} ${getCurrencySymbol()}`;
                    
                    // Mettre à jour le prix barré
                    const originalPriceElement = element.nextElementSibling;
                    if (originalPriceElement) {
                        originalPriceElement.textContent = `${convertedOriginalPrice.toFixed(2)} ${getCurrencySymbol()}`;
                    }
                }
            });
        }

        // Fonction pour ouvrir/fermer le modal du panier
        function toggleCartModal() {
            const cartModal = document.getElementById('cart-modal');
            if (cartModal.classList.contains('hidden')) {
                openCartModal();
            } else {
                closeCartModal();
            }
        }

        // Fonction pour ouvrir le modal du panier
        function openCartModal() {
            const cartModal = document.getElementById('cart-modal');
            updateCartDisplay();
            cartModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Fonction pour fermer le modal du panier
        function closeCartModal() {
            const cartModal = document.getElementById('cart-modal');
            cartModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Fonction pour mettre à jour l'affichage du panier
        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalElement = document.getElementById('cart-total');
            const cartCountElement = document.getElementById('cart-count');
            const cartCountMobileElement = document.getElementById('cart-count-mobile');
            
            let total = 0;
            let itemCount = 0;
            let hasItems = false;
            
            cartItemsContainer.innerHTML = '';
            
            // Afficher les produits individuels
            Object.keys(cart).forEach(productId => {
                if (cart[productId] > 0) {
                    hasItems = true;
                    const product = products[productId];
                    let subtotal = 0;
                    let quantityText = '';

                    if (saleType === 'wholesale') {
                        const basePrice = 6;
                        const pricePerPiece = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerPiece;
                        quantityText = `${cart[productId]} pièce${cart[productId] > 1 ? 's' : ''}`;
                    } else {
                        const basePrice = products[productId].basePrice;
                        const pricePerGram = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerGram;
                        quantityText = `${cart[productId]}g`;
                    }
                    
                    total += subtotal;
                    itemCount += cart[productId];

                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'flex justify-between items-center py-3 border-b border-gray-200';
                    itemDiv.innerHTML = `
                        <div class="flex-1">
                            <h4 class="font-semibold text-warm-brown">${product.name}</h4>
                            <p class="text-sm text-gray-600">${quantityText}</p>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="font-bold text-warm-brown">${subtotal.toFixed(2)} ${getCurrencySymbol()}</span>
                            <button onclick="removeFromCart('${productId}')" class="text-red-500 hover:text-red-700 p-1">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemDiv);
                }
            });
            
            if (!hasItems) {
                cartItemsContainer.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-shopping-cart text-4xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500 text-lg" data-translate="empty_cart">Votre panier est vide</p>
                        <p class="text-gray-400" data-translate="add_items">Ajoutez des produits pour commencer</p>
                    </div>
                `;
            }
            
            cartTotalElement.textContent = `${total.toFixed(2)} ${getCurrencySymbol()}`;
            cartCountElement.textContent = itemCount;
            if (cartCountMobileElement) {
                cartCountMobileElement.textContent = itemCount;
            }
        }

        // Fonction pour supprimer un produit du panier
        function removeFromCart(productId) {
            cart[productId] = 0;
            updateCartDisplay();
            updateAllProductsDisplay();
            updateOrderSummary();
        }

        // Fonction pour mettre à jour le compteur du panier
        function updateCartCounter() {
            let itemCount = 0;
            Object.keys(cart).forEach(productId => {
                itemCount += cart[productId];
            });
            
            const cartCountElement = document.getElementById('cart-count');
            const cartCountMobileElement = document.getElementById('cart-count-mobile');
            
            if (cartCountElement) {
                cartCountElement.textContent = itemCount;
            }
            if (cartCountMobileElement) {
                cartCountMobileElement.textContent = itemCount;
            }
        }

        // Fonction pour commander via WhatsApp depuis le panier
        function orderViaWhatsApp() {
            // Vérifier que le panier n'est pas vide
            let hasItems = false;
            Object.keys(cart).forEach(productId => {
                if (cart[productId] > 0) {
                    hasItems = true;
                }
            });
            
            if (!hasItems) {
                alert('Votre panier est vide. Ajoutez des produits avant de commander.');
                return;
            }
            
            // Récupérer les informations du client
            const customerName = document.getElementById('customer-name').value;
            const customerEmail = document.getElementById('customer-email').value;
            const customerPhone = document.getElementById('customer-phone').value;
            const deliveryDate = document.getElementById('delivery-date').value;
            const deliveryAddress = document.getElementById('delivery-address').value;
            const deliveryNotes = document.getElementById('delivery-notes').value;
            
            let message = "🛒 *Commande BeldiNuts - Panier*\n\n";
            message += "Bonjour ! Je souhaite commander les produits suivants :\n\n";
            
            let total = 0;
            
            Object.keys(cart).forEach(productId => {
                if (cart[productId] > 0) {
                    const product = products[productId];
                    let subtotal = 0;
                    let quantityText = '';

                    if (saleType === 'wholesale') {
                        const basePrice = 6;
                        const pricePerPiece = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerPiece;
                        quantityText = `${cart[productId]} pièce${cart[productId] > 1 ? 's' : ''}`;
                    } else {
                        const basePrice = products[productId].basePrice;
                        const pricePerGram = basePrice * exchangeRates[currentCurrency];
                        subtotal = cart[productId] * pricePerGram;
                        quantityText = `${cart[productId]}g`;
                    }
                    
                    total += subtotal;
                    message += `• ${product.name}: ${quantityText} (${subtotal.toFixed(2)} ${getCurrencySymbol()})\n`;
                }
            });
            
            message += `\n*Total: ${total.toFixed(2)} ${getCurrencySymbol()}*\n\n`;
            
            // Ajouter les détails du paiement échelonné si vente en gros
            if (saleType === 'wholesale') {
                const installmentCount = document.getElementById('installment-count').value;
                const installmentAmount = document.getElementById('installment-amount').textContent;
                
                message += "*💳 Paiement Échelonné :*\n";
                message += `📊 Nombre d'échéances: ${installmentCount}\n`;
                message += `💰 Montant par échéance: ${installmentAmount}\n\n`;
            }
            
            message += "*Informations de livraison :*\n";
            message += `👤 Nom: ${customerName}\n`;
            message += `📧 Email: ${customerEmail}\n`;
            message += `📱 Téléphone: ${customerPhone}\n`;
            message += `📅 Date souhaitée: ${deliveryDate}\n`;
            message += `📍 Adresse: ${deliveryAddress}\n`;
            if (deliveryNotes.trim()) {
                message += `📝 Notes: ${deliveryNotes}\n`;
            }
            message += `\nMerci de me confirmer la disponibilité et les modalités de livraison.`;
            
            const phoneNumber = "212615919437";
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Fermer le modal en cliquant sur le fond
        document.getElementById('product-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProductModal();
            }
        });

        // Fermer le modal avec la touche Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeProductModal();
                closeCartModal();
            }
        });

        // Fermer le modal du panier en cliquant sur le fond
        document.getElementById('cart-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCartModal();
            }
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', async function() {
            // Load data from JSON files
            await loadData();
            
            updateOrderSummary();
            
            // Définir la date minimum pour la livraison (aujourd'hui)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('delivery-date').min = today;
            
            // Ajouter des écouteurs d'événements pour le formulaire
            const form = document.getElementById('customer-form');
            form.addEventListener('input', updateOrderSummary);
            form.addEventListener('change', updateOrderSummary);
            
            // Synchroniser les sélecteurs de langue
            const desktopLangSelect = document.getElementById('language-select');
            const mobileLangSelect = document.getElementById('language-select-mobile');
            
            if (desktopLangSelect && mobileLangSelect) {
                desktopLangSelect.addEventListener('change', function() {
                    mobileLangSelect.value = this.value;
                });
                
                mobileLangSelect.addEventListener('change', function() {
                    desktopLangSelect.value = this.value;
                });
            }
            
            // Synchroniser les sélecteurs de devise
            const desktopCurrencySelect = document.getElementById('currency-select');
            const mobileCurrencySelect = document.getElementById('currency-select-mobile');
            
            if (desktopCurrencySelect && mobileCurrencySelect) {
                desktopCurrencySelect.addEventListener('change', function() {
                    mobileCurrencySelect.value = this.value;
                });
                
                mobileCurrencySelect.addEventListener('change', function() {
                    desktopCurrencySelect.value = this.value;
                });
            }
        });
    </script>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <img src="beldi-nuts-logo.png" alt="BeldiNuts Logo" class="h-8 w-8 mr-3">
                        <h3 class="text-2xl font-bold text-light-gold">BeldiNuts</h3>
                    </div>
                    <p class="text-gray-300 mb-4">
                        Votre partenaire pour une alimentation saine et naturelle. 
                        Des produits d'exception directement du Maroc.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-light-gold transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-light-gold transition-colors">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-light-gold transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Produits</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">Amandes</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">Noix</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">Dattes</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">Fruits Secs</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Informations</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">À propos</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">Livraison</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">Retours</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-light-gold transition-colors">FAQ</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Contact</h4>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <i class="fas fa-map-marker-alt text-light-gold mr-2"></i>
                            <span class="text-gray-300">Casablanca, Maroc</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-phone text-light-gold mr-2"></i>
                            <span class="text-gray-300">+212 5XX XXX XXX</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-envelope text-light-gold mr-2"></i>
                            <span class="text-gray-300">contact@beldinuts.ma</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-12 pt-8 text-center">
                <p class="text-gray-300">
                    © 2024 BeldiNuts. Tous droits réservés. | 
                    <a href="#" class="hover:text-light-gold transition-colors">Mentions légales</a> | 
                    <a href="#" class="hover:text-light-gold transition-colors">Politique de confidentialité</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-warm-brown" data-translate="cart_title">Mon Panier</h2>
                <button onclick="closeCartModal()" class="text-gray-500 hover:text-warm-brown text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="p-6">
                <div id="cart-items" class="space-y-4 mb-6">
                    <!-- Cart items will be populated here -->
                </div>
                
                <div class="border-t pt-6">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-xl font-bold text-warm-brown" data-translate="cart_total">Total:</span>
                        <span id="cart-total" class="text-2xl font-bold text-warm-brown">0 DH</span>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button onclick="closeCartModal()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-full transition-colors">
                            <i class="fas fa-arrow-left mr-2"></i>
                            <span data-translate="continue_shopping">Continuer les achats</span>
                        </button>
                        <button onclick="orderViaWhatsApp()" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-full transition-colors">
                            <i class="fab fa-whatsapp mr-2"></i>
                            <span data-translate="order_whatsapp">Commander via WhatsApp</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="product-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center">
                <h2 id="modal-title" class="text-2xl font-bold text-warm-brown">Détails du Produit</h2>
                <button onclick="closeProductModal()" class="text-gray-500 hover:text-warm-brown text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="p-6">
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Product Image -->
                    <div>
                        <div id="modal-image" class="h-64 md:h-80 bg-cover bg-center rounded-xl mb-4"></div>
                        <div class="text-center">
                            <span id="modal-price" class="text-3xl font-bold text-warm-brown">2.00 DH/g</span>
                        </div>
                    </div>
                    
                    <!-- Product Details -->
                    <div>
                        <h3 id="modal-product-name" class="text-2xl font-bold text-warm-brown mb-4">Nom du Produit</h3>
                        <p id="modal-description" class="text-gray-600 mb-6">Description du produit...</p>
                        
                        <!-- Nutritional Benefits -->
                        <div class="mb-6">
                            <h4 class="text-lg font-semibold text-warm-brown mb-3">
                                <i class="fas fa-heart text-red-500 mr-2"></i>
                                Bienfaits Nutritionnels
                            </h4>
                            <ul id="modal-benefits" class="space-y-2 text-gray-700">
                                <!-- Benefits will be populated by JavaScript -->
                            </ul>
                        </div>
                        
                        <!-- Usage Tips -->
                        <div class="mb-6">
                            <h4 class="text-lg font-semibold text-warm-brown mb-3">
                                <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                                Conseils d'Utilisation
                            </h4>
                            <ul id="modal-usage" class="space-y-2 text-gray-700">
                                <!-- Usage tips will be populated by JavaScript -->
                            </ul>
                        </div>
                        
                        <!-- Storage Tips -->
                        <div class="mb-6">
                            <h4 class="text-lg font-semibold text-warm-brown mb-3">
                                <i class="fas fa-archive text-blue-500 mr-2"></i>
                                Conservation
                            </h4>
                            <p id="modal-storage" class="text-gray-700">Conseils de conservation...</p>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="flex justify-center">
                            <button onclick="closeProductModal()" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-3 px-8 rounded-full transition-colors">
                                Fermer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
